<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANOMALY: TERMINAL_ACCESS</title>
    <style>
        /* ===========================================
           ROOT & RESET
           =========================================== */
        :root {
            --bg-dark: #050508;
            --terminal-bg: #0a0c0f;
            --panel-bg: #080a0d;
            --border-color: #1a2a1a;
            --text-primary: #00ff41;
            --text-dim: #008f24;
            --text-muted: #004d14;
            --text-white: #c0c0c0;
            --accent-cyan: #00f3ff;
            --accent-red: #ff3333;
            --accent-yellow: #ffcc00;
            --font-mono: 'Consolas', 'Courier New', monospace;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: var(--bg-dark);
            font-family: var(--font-mono);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* ===========================================
           CRT OVERLAY EFFECTS
           =========================================== */
        .crt-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background:
                    linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%),
                    linear-gradient(90deg, rgba(255, 0, 0, 0.03), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.03));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .vignette {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.6) 100%);
            pointer-events: none;
            z-index: 999;
        }

        /* ===========================================
           MAIN LAYOUT (7:3)
           =========================================== */
        .game-container {
            display: flex;
            height: 100vh;
            padding: 20px;
            gap: 15px;
        }

        /* ===========================================
           TERMINAL PANEL (70%)
           =========================================== */
        .terminal-panel {
            flex: 7;
            display: flex;
            flex-direction: column;
            background: var(--terminal-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            overflow: hidden;
        }

        .terminal-header {
            display: flex;
            align-items: center;
            padding: 8px 15px;
            background: linear-gradient(180deg, #0f1a0f 0%, #0a0f0a 100%);
            border-bottom: 1px solid var(--border-color);
            gap: 15px;
        }

        .terminal-dots {
            display: flex;
            gap: 6px;
        }

        .terminal-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }
        .terminal-dot.red { background: #ff5f56; }
        .terminal-dot.yellow { background: #ffbd2e; }
        .terminal-dot.green { background: #27ca40; }

        .terminal-title {
            font-size: 12px;
            color: var(--text-dim);
            letter-spacing: 2px;
        }

        .terminal-body {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .terminal-output {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            font-size: 14px;
            line-height: 1.6;
        }

        .terminal-output::-webkit-scrollbar {
            width: 6px;
        }
        .terminal-output::-webkit-scrollbar-track {
            background: var(--terminal-bg);
        }
        .terminal-output::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        /* Output line styles */
        .output-line {
            margin-bottom: 2px;
            word-wrap: break-word;
        }
        .output-line.system { color: var(--text-dim); }
        .output-line.error { color: var(--accent-red); }
        .output-line.success { color: #33ff33; }
        .output-line.info { color: var(--accent-cyan); }
        .output-line.warning { color: var(--accent-yellow); }
        .output-line.file-content {
            color: var(--text-white);
            padding-left: 10px;
            border-left: 2px solid var(--border-color);
            margin: 5px 0;
        }
        .output-line.ascii-art {
            color: var(--text-primary);
            white-space: pre;
            font-size: 10px;
            line-height: 1.2;
        }

        /* Directory listing */
        .dir-listing {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 5px;
            margin: 10px 0;
        }
        .dir-item {
            padding: 3px 8px;
            border-radius: 2px;
        }
        .dir-item.folder { color: var(--accent-cyan); }
        .dir-item.folder::before { content: "ğŸ“ "; }
        .dir-item.file { color: var(--text-white); }
        .dir-item.file::before { content: "ğŸ“„ "; }
        .dir-item.encrypted { color: var(--accent-yellow); }
        .dir-item.encrypted::before { content: "ğŸ”’ "; }
        .dir-item.encrypted-high { color: #ff6600; }
        .dir-item.encrypted-high::before { content: "ğŸ” "; }
        .dir-item.target { color: #ff66ff; }
        .dir-item.target::before { content: "â­ "; }

        /* Input area */
        .terminal-input-area {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            background: rgba(0, 20, 0, 0.3);
            border-top: 1px solid var(--border-color);
        }

        .prompt {
            color: var(--accent-cyan);
            margin-right: 10px;
            white-space: nowrap;
        }

        #terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 14px;
            caret-color: var(--text-primary);
        }

        .cursor-blink {
            animation: blink 1s step-end infinite;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }

        /* ===========================================
           MANUAL PANEL (30%)
           =========================================== */
        .manual-panel {
            flex: 3;
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .manual-header {
            padding: 12px 15px;
            background: linear-gradient(180deg, #0f1a0f 0%, #0a0f0a 100%);
            border-bottom: 1px solid var(--border-color);
            text-align: center;
        }

        .manual-header h2 {
            font-size: 14px;
            letter-spacing: 3px;
            color: var(--text-dim);
            text-transform: uppercase;
        }

        .manual-content {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            font-size: 12px;
        }

        .manual-section {
            margin-bottom: 20px;
        }

        .manual-section h3 {
            color: var(--accent-cyan);
            font-size: 11px;
            letter-spacing: 2px;
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px dashed var(--border-color);
        }

        .cmd-list {
            list-style: none;
        }

        .cmd-list li {
            margin-bottom: 8px;
            padding-left: 10px;
            border-left: 2px solid var(--border-color);
        }

        .cmd-name {
            color: var(--text-primary);
            font-weight: bold;
        }

        .cmd-desc {
            color: var(--text-white);
            opacity: 0.6;

            font-size: 11px;
        }

        .objective-box {
            background: rgba(255, 50, 50, 0.1);
            border: 1px solid rgba(255, 50, 50, 0.3);
            padding: 12px;
            border-radius: 4px;
            margin-top: 10px;
        }

        .objective-box .target-file {
            color: var(--accent-red);
            font-size: 14px;
            font-weight: bold;
            margin-top: 5px;
            text-shadow: 0 0 10px rgba(255, 50, 50, 0.5);
        }

        .start-hint {
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid rgba(0, 255, 65, 0.3);
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 15px;
        }

        .start-hint-title {
            color: var(--text-primary);
            font-weight: bold;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .start-hint-cmd {
            color: var(--accent-cyan);
            font-family: monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 3px 8px;
            border-radius: 3px;
            display: inline-block;
            margin-top: 5px;
        }

        .lang-switch {
            position: absolute;
            top: 25px;
            right: 40px;
            font-size: 12px;
            color: var(--text-dim);
            cursor: pointer;
            z-index: 100;
        }
        .lang-switch:hover { color: var(--text-primary); }
        .lang-switch span.active { color: var(--text-primary); }

        /* ===========================================
           MATRIX MINI-GAME (Embedded)
           =========================================== */
        .matrix-container {
            margin: 15px 0;
            padding: 15px;
            background: rgba(0, 50, 50, 0.2);
            border: 1px solid var(--accent-cyan);
            border-radius: 4px;
        }

        .matrix-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .matrix-level {
            color: var(--accent-cyan);
            font-size: 12px;
            letter-spacing: 2px;
        }

        .matrix-progress {
            color: var(--text-dim);
            font-size: 12px;
        }

        .matrix-body {
            display: flex;
            gap: 30px;
            justify-content: center;
            align-items: flex-start;
        }

        .matrix-left {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .sequence-display {
            text-align: center;
        }

        .sequence-label {
            font-size: 11px;
            color: var(--text-muted);
            margin-bottom: 5px;
        }

        .sequence-boxes {
            display: flex;
            gap: 5px;
            justify-content: center;
        }

        .seq-box {
            width: 36px;
            height: 36px;
            border: 1px solid var(--accent-red);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--accent-red);
            background: rgba(255, 50, 50, 0.1);
        }

        .seq-box.matched {
            background: var(--accent-red);
            color: #000;
        }

        .buffer-display {
            text-align: center;
        }

        .buffer-boxes {
            display: flex;
            gap: 5px;
            justify-content: center;
        }

        .buf-box {
            width: 36px;
            height: 36px;
            border: 1px solid var(--text-dim);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: var(--text-primary);
            background: rgba(0, 255, 65, 0.05);
        }

        .buf-box.filled {
            border-color: var(--text-primary);
            background: rgba(0, 255, 65, 0.2);
        }

        .buf-box.overflow-warning {
            border-color: var(--accent-yellow);
            animation: pulse-warning 0.5s infinite;
        }

        @keyframes pulse-warning {
            50% { background: rgba(255, 200, 0, 0.3); }
        }

        .matrix-grid {
            display: grid;
            gap: 4px;
        }

        .matrix-cell {
            width: 44px;
            height: 44px;
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 13px;
            color: var(--text-white);
            cursor: pointer;
            transition: all 0.15s ease;
            background: rgba(0, 20, 20, 0.5);
        }

        .matrix-cell:hover:not(.disabled):not(.selected) {
            border-color: var(--text-primary);
            background: rgba(0, 255, 65, 0.1);
        }

        .matrix-cell.active-zone {
            border-color: var(--accent-cyan);
            box-shadow: inset 0 0 15px rgba(0, 243, 255, 0.15);
        }

        .matrix-cell.selected {
            background: var(--text-primary);
            color: #000;
            cursor: default;
        }

        .matrix-cell.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .matrix-hint {
            text-align: center;
            margin-top: 15px;
            font-size: 11px;
            color: var(--text-muted);
        }

        /* ===========================================
           DOWNLOAD ANIMATION
           =========================================== */
        .download-progress {
            margin: 10px 0;
        }

        .progress-bar-container {
            background: var(--border-color);
            height: 20px;
            border-radius: 2px;
            overflow: hidden;
            margin: 5px 0;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--text-primary), var(--accent-cyan));
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            font-size: 12px;
            color: var(--text-dim);
        }

        /* ===========================================
           SUCCESS SCREEN
           =========================================== */
        .success-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 10, 0, 0.95);
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 500;
        }

        .success-overlay.visible {
            display: flex;
        }

        .success-title {
            font-size: 48px;
            color: #33ff33;
            text-shadow: 0 0 30px #33ff33, 0 0 60px #33ff33;
            letter-spacing: 10px;
            margin-bottom: 20px;
            animation: glowPulse 2s ease-in-out infinite;
        }

        .success-subtitle {
            font-size: 16px;
            color: var(--text-dim);
            letter-spacing: 5px;
        }

        @keyframes glowPulse {
            0%, 100% { text-shadow: 0 0 30px #33ff33, 0 0 60px #33ff33; }
            50% { text-shadow: 0 0 50px #33ff33, 0 0 100px #33ff33, 0 0 150px #33ff33; }
        }

        /* ===========================================
           LANGUAGE TOGGLE
           =========================================== */
        body.lang-en .lang-cn-only { display: none !important; }
        body.lang-cn .lang-en-only { display: none !important; }

        /* ===========================================
           RESPONSIVE
           =========================================== */
        @media (max-width: 1000px) {
            .game-container {
                flex-direction: column;
            }
            .terminal-panel, .manual-panel {
                flex: none;
            }
            .terminal-panel {
                height: 60vh;
            }
            .manual-panel {
                height: 35vh;
            }
        }
    </style>
</head>
<body class="lang-cn">

<div class="crt-overlay"></div>
<div class="vignette"></div>

<div class="lang-switch" onclick="toggleLanguage()">
    [ <span id="btn-cn" class="active">CN</span> / <span id="btn-en">EN</span> ]
</div>

<div class="game-container">
    <div class="terminal-panel">
        <div class="terminal-header">
            <div class="terminal-dots">
                <span class="terminal-dot red"></span>
                <span class="terminal-dot yellow"></span>
                <span class="terminal-dot green"></span>
            </div>
            <span class="terminal-title">
                    <span class="lang-cn-only">è¿œç¨‹ç»ˆç«¯ - å·²è¿æ¥</span>
                    <span class="lang-en-only">REMOTE TERMINAL - CONNECTED</span>
                </span>
        </div>
        <div class="terminal-body">
            <div class="terminal-output" id="terminal-output"></div>
            <div class="terminal-input-area">
                <span class="prompt" id="prompt">guest@server:/$</span>
                <input type="text" id="terminal-input" autocomplete="off" autofocus>
            </div>
        </div>
    </div>

    <div class="manual-panel">
        <div class="manual-header">
            <h2>
                <span class="lang-cn-only">æ“ä½œæ‰‹å†Œ</span>
                <span class="lang-en-only">OPERATOR MANUAL</span>
            </h2>
        </div>
        <div class="manual-content">
            <!-- æ–°å¢ï¼šèµ·å§‹æç¤º -->
            <div class="start-hint">
                <div class="start-hint-title">
                    <span class="lang-cn-only">âš ï¸ ä»è¿™é‡Œå¼€å§‹</span>
                    <span class="lang-en-only">âš ï¸ START HERE</span>
                </div>
                <p style="color: #88aa88; font-size: 11px;">
                    <span class="lang-cn-only">é˜…è¯»ç³»ç»ŸæŒ‡å¼•è·å–æ£€ç´¢æµç¨‹</span>
                    <span class="lang-en-only">Read system guide for retrieval process</span>
                </p>
                <div class="start-hint-cmd">open readme.txt</div>
            </div>

            <div class="manual-section">
                <h3>
                    <span class="lang-cn-only">â–¸ ä»»åŠ¡ç›®æ ‡</span>
                    <span class="lang-en-only">â–¸ OBJECTIVE</span>
                </h3>
                <div class="objective-box">
                    <span class="lang-cn-only">å®šä½å¹¶ä¸‹è½½æœºå¯†æ–‡ä»¶:</span>
                    <span class="lang-en-only">Locate and download:</span>
                    <div class="target-file">SHADOW_LEDGER_FINAL.dat</div>
                </div>
            </div>

            <div class="manual-section">
                <h3>
                    <span class="lang-cn-only">â–¸ å¯ç”¨æŒ‡ä»¤</span>
                    <span class="lang-en-only">â–¸ COMMANDS</span>
                </h3>
                <ul class="cmd-list">
                    <li>
                        <span class="cmd-name">where</span><br>
                        <span class="cmd-desc lang-cn-only">æ˜¾ç¤ºå½“å‰æ‰€åœ¨ä½ç½®</span>
                        <span class="cmd-desc lang-en-only">Show current location</span>
                    </li>
                    <li>
                        <span class="cmd-name">look</span><br>
                        <span class="cmd-desc lang-cn-only">æŸ¥çœ‹å½“å‰ç›®å½•å†…å®¹</span>
                        <span class="cmd-desc lang-en-only">See what's here</span>
                    </li>
                    <li>
                        <span class="cmd-name">open &lt;name&gt;</span><br>
                        <span class="cmd-desc lang-cn-only">æ‰“å¼€æ–‡ä»¶å¤¹æˆ–é¢„è§ˆæ–‡ä»¶</span>
                        <span class="cmd-desc lang-en-only">Open folder or preview file</span>
                    </li>
                    <li>
                        <span class="cmd-name">back</span><br>
                        <span class="cmd-desc lang-cn-only">è¿”å›ä¸Šçº§ç›®å½•</span>
                        <span class="cmd-desc lang-en-only">Return to parent directory</span>
                    </li>
                    <li>
                        <span class="cmd-name">download &lt;file&gt;</span><br>
                        <span class="cmd-desc lang-cn-only">ä¸‹è½½æŒ‡å®šæ–‡ä»¶</span>
                        <span class="cmd-desc lang-en-only">Download specified file</span>
                    </li>
                    <li>
                        <span class="cmd-name">decrypt &lt;name&gt;</span><br>
                        <span class="cmd-desc lang-cn-only">è§£å¯†åŠ å¯†çš„ç›®å½•æˆ–æ–‡ä»¶</span>
                        <span class="cmd-desc lang-en-only">Decrypt encrypted folder/file</span>
                    </li>
                    <li>
                        <span class="cmd-name">clear</span><br>
                        <span class="cmd-desc lang-cn-only">æ¸…ç©ºç»ˆç«¯å±å¹•</span>
                        <span class="cmd-desc lang-en-only">Clear terminal screen</span>
                    </li>
                    <li>
                        <span class="cmd-name">help</span><br>
                        <span class="cmd-desc lang-cn-only">æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</span>
                        <span class="cmd-desc lang-en-only">Show help information</span>
                    </li>
                </ul>
            </div>

            <div class="manual-section">
                <h3>
                    <span class="lang-cn-only">â–¸ æç¤º</span>
                    <span class="lang-en-only">â–¸ TIPS</span>
                </h3>
                <p style="color: #88aa88; font-size: 11px; line-height: 1.6;">
                    <span class="lang-cn-only">â€¢ æŒ‰ TAB é”®å¯è‡ªåŠ¨è¡¥å…¨<br>â€¢ ğŸ”’ è¡¨ç¤ºéœ€è¦è§£å¯†<br>â€¢ ğŸ” è¡¨ç¤ºé«˜å¼ºåº¦åŠ å¯†</span>
                    <span class="lang-en-only">â€¢ Press TAB to auto-complete<br>â€¢ ğŸ”’ requires decryption<br>â€¢ ğŸ” high-level encryption</span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="success-overlay" id="success-overlay">
    <div class="success-title">
        <span class="lang-cn-only">ä»»åŠ¡å®Œæˆ</span>
        <span class="lang-en-only">MISSION COMPLETE</span>
    </div>
    <div class="success-subtitle">
        <span class="lang-cn-only">[ æ•°æ®å·²å®‰å…¨è·å– ]</span>
        <span class="lang-en-only">[ DATA SECURED ]</span>
    </div>
</div>

<script>
    // ===========================================
    // LANGUAGE SYSTEM
    // ===========================================
    let currentLang = localStorage.getItem('app_lang') || 'cn';

    function setLanguage(lang) {
        currentLang = lang;
        document.body.classList.remove('lang-cn', 'lang-en');
        document.body.classList.add('lang-' + lang);
        localStorage.setItem('app_lang', lang);
        document.getElementById('btn-cn').classList.toggle('active', lang === 'cn');
        document.getElementById('btn-en').classList.toggle('active', lang === 'en');
    }

    function toggleLanguage() {
        setLanguage(currentLang === 'cn' ? 'en' : 'cn');
    }

    function t(cnText, enText) {
        return currentLang === 'cn' ? cnText : enText;
    }

    // Initialize language
    setLanguage(currentLang);

    // ===========================================
    // FILE SYSTEM DATA (é‡æ„ç‰ˆ)
    // ===========================================
    const FILE_SYSTEM = {
        // ===== æ ¹ç›®å½• =====
        '/': {
            type: 'folder',
            children: ['readme.txt', 'notice', 'directory', 'logs', 'archives']
        },

        // ===== readme.txt - å…¥å£æŒ‡å¼• =====
        '/readme.txt': {
            type: 'file',
            content: {
                cn: `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ANOMALY HIGH - DATA CENTER // SYSTEM README
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[!] è­¦å‘Šï¼šæœ¬ç³»ç»Ÿå·²äº2019å¹´åœæ­¢ç»´æŠ¤ï¼Œä»…ä¿ç•™å­˜æ¡£åŠŸèƒ½ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                      æ¡£æ¡ˆæ£€ç´¢æŒ‡å—
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

å¦‚éœ€æŸ¥æ‰¾ç‰¹å®šæ–‡ä»¶ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

  1. æŸ¥é˜… /notice/    â†’ ç¡®è®¤æ–‡ä»¶çš„è´Ÿè´£äºº
  2. æŸ¥é˜… /directory/ â†’ è·å–è´Ÿè´£äººçš„éƒ¨é—¨ä»£å·å’Œå‘˜å·¥å·¥å·
  3. æŸ¥é˜… /logs/      â†’ ç¡®è®¤æ–‡ä»¶çš„åˆ›å»ºæ—¥æœŸ
  4. å‰å¾€ /archives/  â†’ æŒ‰è·¯å¾„æ ¼å¼å®šä½æ–‡ä»¶

æ¡£æ¡ˆè·¯å¾„æ ¼å¼ï¼š/archives/[éƒ¨é—¨ä»£å·]/[å‘˜å·¥å·¥å·]/[æ—¥æœŸYYYYMMDD]/

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[æ³¨æ„] éƒ¨åˆ†ç›®å½•å¯ç”¨äº†å®‰å…¨åŠ å¯†ï¼Œéœ€è¦ç ´è§£åæ‰èƒ½è®¿é—®ã€‚
[æç¤º] è¾“å…¥ 'help' æŸ¥çœ‹å¯ç”¨å‘½ä»¤ã€‚
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`,
                en: `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        ANOMALY HIGH - DATA CENTER // SYSTEM README
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[!] WARNING: System decommissioned in 2019. Archive-only mode.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                      FILE RETRIEVAL GUIDE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

To locate a specific file, follow these steps:

  1. Check /notice/    â†’ Identify the file custodian
  2. Check /directory/ â†’ Get custodian's dept code & employee ID
  3. Check /logs/      â†’ Confirm file creation date
  4. Go to /archives/  â†’ Navigate using path format

Archive path format: /archives/[DEPT_CODE]/[EMP_ID]/[YYYYMMDD]/

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
[NOTE] Some directories are encrypted and require decryption.
[TIP] Type 'help' for available commands.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•`
            }
        },

        // ===== notice ç›®å½• - 1å±‚åŠ å¯† =====
        '/notice': {
            type: 'folder',
            encrypted: true,
            encryptLevel: 1,
            children: ['memo_internal.txt']
        },
        '/notice/memo_internal.txt': {
            type: 'file',
            content: {
                cn: `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              å¼‚è±¡ä¸­å­¦ Â· å†…éƒ¨é€šçŸ¥ [æœºå¯†]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

è‡´ï¼šæ•°æ®ä¸­å¿ƒç®¡ç†å‘˜
è‡ªï¼šæ ¡è‘£ä¼šåŠå…¬å®¤
æ—¥æœŸï¼š2019å¹´4æœˆ20æ—¥

æ ¹æ®æ ¡è‘£ä¼š2019å¹´4æœˆ18æ—¥ç¬¬7æ¬¡é—­é—¨ä¼šè®®å†³è®®ï¼š

1. æ‰€æœ‰æ¶‰åŠæ ¡è‘£ä¼šä¸“é¡¹èµ„é‡‘çš„åŸå§‹å‡­è¯ï¼Œç»Ÿä¸€è½¬ç§»è‡³ä¸ªäººæ¡£æ¡ˆåº“åŠ å¯†å­˜å‚¨
2. è´¢åŠ¡å®¡è®¡åŸå§‹è´¦å†Œï¼ˆä»£å· SHADOW_LEDGERï¼‰ç”±æ ¡è‘£ä¼šç§˜ä¹¦ å‘¨æ˜ å…¨æƒä¿ç®¡
3. æœªç»æ ¡è‘£ä¼šä¹¦é¢æˆæƒï¼Œä»»ä½•äººä¸å¾—è°ƒé˜…ä¸Šè¿°æ–‡ä»¶

ç‰¹æ­¤é€šçŸ¥ã€‚

                                        æ ¡è‘£ä¼šåŠå…¬å®¤ï¼ˆç›–ç« ï¼‰

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`,
                en: `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
              ANOMALY HIGH Â· INTERNAL MEMO [CLASSIFIED]
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

To: Data Center Administrator
From: Board of Directors Office
Date: April 20, 2019

Per Resolution of the 7th Closed-door Meeting on April 18, 2019:

1. All original vouchers related to Board special funds shall be
   transferred to personal archives with encryption
2. The original financial audit ledger (codename: SHADOW_LEDGER)
   is under the sole custody of Board Secretary ZHOU MING
3. No access without written authorization from the Board

This is hereby notified.

                                        Board of Directors Office

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`
            }
        },

        // ===== directory ç›®å½• - 1å±‚åŠ å¯† =====
        '/directory': {
            type: 'folder',
            encrypted: true,
            encryptLevel: 1,
            children: ['departments.txt', 'staff_registry.csv']
        },
        '/directory/departments.txt': {
            type: 'file',
            content: {
                cn: `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           å¼‚è±¡ä¸­å­¦ Â· æ¡£æ¡ˆåº“éƒ¨é—¨ç´¢å¼•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ä»£å·      éƒ¨é—¨å…¨ç§°                  è¯´æ˜
â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€
EDU       æ•™åŠ¡å¤„                    æ•™å­¦æ¡£æ¡ˆã€æˆç»©è®°å½•
FIN       è´¢åŠ¡å¤„                    è´¢åŠ¡æŠ¥è¡¨ã€èµ„é‡‘æµæ°´
HRD       äººäº‹å¤„                    äººå‘˜æ¡£æ¡ˆã€è–ªèµ„è®°å½•
LOG       åå‹¤å¤„                    é‡‡è´­æ¸…å•ã€ç»´ä¿®è®°å½•

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ¡£æ¡ˆè·¯å¾„æ ¼å¼ï¼š/archives/[éƒ¨é—¨ä»£å·]/[å‘˜å·¥å·¥å·]/[æ—¥æœŸYYYYMMDD]/
å‘˜å·¥å·¥å·è¯·æŸ¥é˜…ï¼šstaff_registry.csv
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`,
                en: `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ANOMALY HIGH Â· ARCHIVE DEPARTMENT INDEX
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

CODE      DEPARTMENT                DESCRIPTION
â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
EDU       Academic Affairs          Teaching archives, grades
FIN       Finance                   Financial reports, fund flow
HRD       Human Resources           Personnel files, payroll
LOG       Logistics                 Procurement, maintenance

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Archive path format: /archives/[DEPT_CODE]/[EMP_ID]/[YYYYMMDD]/
For employee IDs, see: staff_registry.csv
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`
            }
        },
        '/directory/staff_registry.csv': {
            type: 'file',
            content: {
                cn: `# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# å¼‚è±¡ä¸­å­¦æ•™èŒå‘˜å·¥ç™»è®°è¡¨ï¼ˆ2019å¹´åº¦ï¼‰
# æ ¼å¼ï¼šå§“å, éƒ¨é—¨, å·¥å·, èŒåŠ¡
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ææ–‡å, EDU, E-1001, æ•™åŠ¡å¤„ä¸»ä»»
å¼ ç§€è‹±, EDU, E-1002, æ•™åŠ¡å¤„å‰¯ä¸»ä»»
ç‹å»ºå†›, EDU, E-1003, æ•™åŠ¡å¹²äº‹

é™ˆå¿—å¼º, FIN, F-2001, è´¢åŠ¡å¤„ä¸»ä»»
åˆ˜æ™“ç‡•, FIN, F-2002, è´¢åŠ¡å¤„å‰¯ä¸»ä»»
å‘¨æ˜, FIN, F-2003, æ ¡è‘£ä¼šç§˜ä¹¦ï¼ˆå…¼ï¼‰
èµµæµ·æ¶›, FIN, F-2004, ä¼šè®¡
å­™ä¸½å, FIN, F-2005, å‡ºçº³

é©¬å›½åº†, HRD, H-3001, äººäº‹å¤„ä¸»ä»»
æ¨æ·‘èŠ¬, HRD, H-3002, äººäº‹å¹²äº‹
å´å¿—åˆš, HRD, H-3003, æ¡£æ¡ˆç®¡ç†å‘˜

éƒ‘å¾·æ˜, LOG, L-4001, åå‹¤å¤„ä¸»ä»»
é»„ç‰å…°, LOG, L-4002, é‡‡è´­ä¸“å‘˜
é’±è¿›, LOG, L-4003, ç»´ä¿®ä¸»ç®¡

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# // å‘¨æ˜ï¼ŒFINéƒ¨é—¨ï¼Œå·¥å· F-2003
# // ç°åœ¨å» /logs/ æŸ¥æŸ¥æ–‡ä»¶æ˜¯ä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`,
                en: `# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ANOMALY HIGH STAFF REGISTRY (2019)
# Format: Name, Department, ID, Position
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Li Wenhua, EDU, E-1001, Director of Academic Affairs
Zhang Xiuying, EDU, E-1002, Deputy Director
Wang Jianjun, EDU, E-1003, Academic Officer

Chen Zhiqiang, FIN, F-2001, Director of Finance
Liu Xiaoyan, FIN, F-2002, Deputy Director
Zhou Ming, FIN, F-2003, Board Secretary (Concurrent)
Zhao Haitao, FIN, F-2004, Accountant
Sun Lihua, FIN, F-2005, Cashier

Ma Guoqing, HRD, H-3001, Director of HR
Yang Shufen, HRD, H-3002, HR Officer
Wu Zhigang, HRD, H-3003, Archive Manager

Zheng Deming, LOG, L-4001, Director of Logistics
Huang Yulan, LOG, L-4002, Procurement Specialist
Qian Jin, LOG, L-4003, Maintenance Supervisor

# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# // Zhou Ming, FIN department, ID: F-2003
# // Now check /logs/ for file creation date
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`
            }
        },

        // ===== logs ç›®å½• - 1å±‚åŠ å¯† =====
        '/logs': {
            type: 'folder',
            encrypted: true,
            encryptLevel: 1,
            children: ['audit_trail.log']
        },
        '/logs/audit_trail.log': {
            type: 'file',
            content: {
                cn: `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ANOMALY HIGH DATA CENTER // FILE AUDIT TRAIL
  Log Period: 2019-04
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[2019-04-02 09:15:33] F-2002 | MODIFY | budget_allocation.docx
[2019-04-08 11:30:45] F-2004 | CREATE | expense_sheet_mar.xlsx
[2019-04-12 14:22:17] F-2001 | CREATE | quarterly_report_Q1.xlsx
[2019-04-15 16:45:22] F-2001 | DELETE | temp_backup.zip
[2019-04-18 02:17:09] F-2003 | CREATE | SHADOW_LEDGER_FINAL.dat
[2019-04-18 02:18:33] F-2003 | CHMOD  | SHADOW_LEDGER_FINAL.dat [RESTRICTED]
[2019-04-18 02:19:01] F-2003 | LOCK   | /F-2003/20190418/ [ENCRYPTED]
[2019-04-22 10:00:00] F-2005 | CREATE | payroll_apr.xlsx
[2019-04-28 15:30:12] F-2001 | MODIFY | annual_budget.xlsx

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`,
                en: `â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ANOMALY HIGH DATA CENTER // FILE AUDIT TRAIL
  Log Period: 2019-04
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

[2019-04-02 09:15:33] F-2002 | MODIFY | budget_allocation.docx
[2019-04-08 11:30:45] F-2004 | CREATE | expense_sheet_mar.xlsx
[2019-04-12 14:22:17] F-2001 | CREATE | quarterly_report_Q1.xlsx
[2019-04-15 16:45:22] F-2001 | DELETE | temp_backup.zip
[2019-04-18 02:17:09] F-2003 | CREATE | SHADOW_LEDGER_FINAL.dat
[2019-04-18 02:18:33] F-2003 | CHMOD  | SHADOW_LEDGER_FINAL.dat [RESTRICTED]
[2019-04-18 02:19:01] F-2003 | LOCK   | /F-2003/20190418/ [ENCRYPTED]
[2019-04-22 10:00:00] F-2005 | CREATE | payroll_apr.xlsx
[2019-04-28 15:30:12] F-2001 | MODIFY | annual_budget.xlsx

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`
            }
        },

        // ===== archives ç›®å½• - æ— éœ€è§£å¯† =====
        '/archives': {
            type: 'folder',
            children: ['EDU', 'FIN', 'HRD', 'LOG']
        },

        // ----- EDU æ•™åŠ¡å¤„ -----
        '/archives/EDU': {
            type: 'folder',
            children: ['E-1001', 'E-1002', 'E-1003']
        },
        '/archives/EDU/E-1001': {
            type: 'folder',
            children: ['20190315']
        },
        '/archives/EDU/E-1001/20190315': {
            type: 'folder',
            children: ['curriculum_plan.docx']
        },
        '/archives/EDU/E-1001/20190315/curriculum_plan.docx': {
            type: 'file',
            content: {
                cn: `[æ•™åŠ¡å¤„æ–‡ä»¶]

2019å­¦å¹´ç¬¬äºŒå­¦æœŸè¯¾ç¨‹å®‰æ’è¡¨

è¿™æ˜¯ä¸€ä»½æ™®é€šçš„æ•™å­¦è®¡åˆ’æ–‡ä»¶ï¼Œä¸ä½ è¦æ‰¾çš„ä¸œè¥¿æ— å…³ã€‚`,
                en: `[Academic Affairs Document]

2019 Spring Semester Curriculum Plan

This is a regular teaching plan file. Not what you're looking for.`
            }
        },
        '/archives/EDU/E-1002': {
            type: 'folder',
            children: ['20190401']
        },
        '/archives/EDU/E-1002/20190401': {
            type: 'folder',
            children: ['exam_schedule.xlsx']
        },
        '/archives/EDU/E-1002/20190401/exam_schedule.xlsx': {
            type: 'file',
            content: {
                cn: `[æ•™åŠ¡å¤„æ–‡ä»¶]

æœŸä¸­è€ƒè¯•æ—¶é—´å®‰æ’è¡¨

æ— å…³ç´§è¦çš„æ—¥å¸¸æ–‡ä»¶ã€‚`,
                en: `[Academic Affairs Document]

Mid-term Exam Schedule

Irrelevant daily document.`
            }
        },'/archives/EDU/E-1003': {
            type: 'folder',
            children: ['20190320']
        },
        '/archives/EDU/E-1003/20190320': {
            type: 'folder',
            children: ['classroom_log.txt']
        },
        '/archives/EDU/E-1003/20190320/classroom_log.txt': {
            type: 'file',
            content: {
                cn: `[æ•™åŠ¡æ—¥å¿—]
3æœˆ20æ—¥ï¼šé«˜ä¸‰(2)ç­æŠ•å½±ä»ªæ•…éšœæŠ¥ä¿®ã€‚
3æœˆ21æ—¥ï¼šç²‰ç¬”åº“å­˜ä¸è¶³ï¼Œéœ€ç”³è¯·é‡‡è´­ã€‚`,
                en: `[Academic Log]
Mar 20: Projector malfunction in Senior Class 2.
Mar 21: Chalk inventory low, need procurement.`
            }
        },

        // ----- FIN è´¢åŠ¡å¤„ -----
        '/archives/FIN': {
            type: 'folder',
            children: ['F-2001', 'F-2002', 'F-2003', 'F-2004', 'F-2005']
        },
        '/archives/FIN/F-2001': {
            type: 'folder',
            children: ['20190315']
        },
        '/archives/FIN/F-2001/20190315': {
            type: 'folder',
            children: ['quarterly_report.xlsx']
        },
        '/archives/FIN/F-2001/20190315/quarterly_report.xlsx': {
            type: 'file',
            content: {
                cn: `[è´¢åŠ¡å¤„æ–‡ä»¶]

2019å¹´ç¬¬ä¸€å­£åº¦è´¢åŠ¡æŠ¥å‘Šï¼ˆå…¬å¼€ç‰ˆï¼‰

è¿™æ˜¯ç»è¿‡"ç¾åŒ–"çš„å®˜æ–¹æŠ¥å‘Šï¼Œä¸åŒ…å«çœŸå®æ•°æ®ã€‚`,
                en: `[Finance Document]

Q1 2019 Financial Report (Public Version)

This is the "sanitized" official report. Does not contain real data.`
            }
        },
        // F-2003 å‘¨æ˜ - æ­£ç¡®è·¯å¾„
        '/archives/FIN/F-2003': {
            type: 'folder',
            children: ['20190401', '20190418']
        },
        '/archives/FIN/F-2003/20190401': {
            type: 'folder',
            children: ['fund_transfer.xlsx']
        },
        '/archives/FIN/F-2003/20190401/fund_transfer.xlsx': {
            type: 'file',
            content: {
                cn: `[è´¢åŠ¡å¤„æ–‡ä»¶]

æ ¡è‘£ä¼šä¸“é¡¹èµ„é‡‘è½¬è´¦è®°å½•

è¿™é‡Œåªæœ‰ä¸€äº›å¸¸è§„çš„è½¬è´¦è®°å½•ï¼Œä¸æ˜¯æœ€ç»ˆè´¦æœ¬ã€‚
ç»§ç»­æ‰¾...`,
                en: `[Finance Document]

Board Special Fund Transfer Records

Just regular transfer records. Not the final ledger.
Keep looking...`
            }
        },
        // æ­£ç¡®çš„æœ€ç»ˆç›®å½•
        '/archives/FIN/F-2003/20190418': {
            type: 'folder',
            children: ['SHADOW_LEDGER_FINAL.dat']
        },
        '/archives/FIN/F-2003/20190418/SHADOW_LEDGER_FINAL.dat': {
            type: 'file',
            encrypted: true,
            encryptLevel: 3,
            isTarget: true,
            content: {
                cn: `[ç»å¯† - å½±å­è´¦æœ¬ æœ€ç»ˆç‰ˆ]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    æ ¡è‘£ä¼šä¸“é¡¹èµ„é‡‘åŸå§‹è®°å½•
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

è­¦å‘Šï¼šæ­¤æ–‡ä»¶ä¸æ ¡è‘£ä¼šå…¬å¼€çš„å¹´åº¦å®¡è®¡æŠ¥å‘Šå­˜åœ¨ä¸¥é‡å‡ºå…¥ã€‚

è®°å½•æ‘˜è¦ï¼š
- 2018å¹´"æ ¡èˆä¿®ç¼®"é¡¹ç›®ï¼šæ‹¨æ¬¾ 280ä¸‡ï¼Œå®é™…æ”¯å‡º 45ä¸‡
- 2018å¹´"ç‰¹æ®Šç ”ç©¶"é¡¹ç›®ï¼šæ‹¨æ¬¾ 150ä¸‡ï¼Œå»å‘ä¸æ˜
- 2019å¹´"è®¾å¤‡é‡‡è´­"é¡¹ç›®ï¼šæ‹¨æ¬¾ 320ä¸‡ï¼Œå®é™…åˆ°è´§è®¾å¤‡ä»·å€¼ 62ä¸‡
- å·®é¢èµ„é‡‘æµå‘ï¼š[å·²è¿½è¸ªè‡³å¤šä¸ªç¦»å²¸è´¦æˆ·]

æ¶‰åŠäººå‘˜ï¼š
- æ ¡è‘£ä¼šä¸»å¸­
- è´¢åŠ¡å¤„ç›¸å…³äººå‘˜
- [æ›´å¤šè¯¦æƒ…è§é™„ä»¶]

è¿™æ˜¯æ­éœ²å¼‚è±¡ä¸­å­¦é«˜å±‚è´ªæ±¡çš„å…³é”®è¯æ®ã€‚

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
> ä½¿ç”¨ 'download SHADOW_LEDGER_FINAL.dat' ä¸‹è½½è¯æ®ã€‚
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`,
                en: `[TOP SECRET - SHADOW LEDGER FINAL]

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    BOARD SPECIAL FUND RAW RECORDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

WARNING: Significant discrepancies against public annual audit.

Summary:
- 2018 "Building Renovation": Allocated 2.8M, Actual spent 450K
- 2018 "Special Research": Allocated 1.5M, Whereabouts unknown
- 2019 "Equipment Purchase": Allocated 3.2M, Actual equipment value 620K
- Difference traced to: [Multiple offshore accounts]

Personnel involved:
- Board Chairman
- Finance Department staff
- [See attachments for details]

This is the key evidence to expose Anomaly High's corruption.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
> Use 'download SHADOW_LEDGER_FINAL.dat' to extract evidence.
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€`
            }
        },
        '/archives/FIN/F-2004': {
            type: 'folder',
            children: ['20190408']
        },
        '/archives/FIN/F-2004/20190408': {
            type: 'folder',
            children: ['expense_sheet.xlsx']
        },
        '/archives/FIN/F-2004/20190408/expense_sheet.xlsx': {
            type: 'file',
            content: {
                cn: `[è´¢åŠ¡å¤„æ–‡ä»¶]

æ—¥å¸¸æŠ¥é”€å•æ±‡æ€»

æ™®é€šçš„æŠ¥é”€è®°å½•ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚`,
                en: `[Finance Document]

Daily Expense Reports Summary

Regular reimbursement records. Nothing special.`
            }
        },'/archives/FIN/F-2002': {
            type: 'folder',
            encrypted: true, // å‰¯ä¸»ä»»çš„æ–‡ä»¶åŠ å¯†å¾ˆæ­£å¸¸ï¼Œå¢åŠ å¹²æ‰°
            encryptLevel: 1,
            children: ['tax_policy_draft.docx'] // è§£å¼€åå‘ç°åªæ˜¯æ— èŠçš„æ”¿ç­–
        },
        '/archives/FIN/F-2002/tax_policy_draft.docx': {
            type: 'file',
            content: {
                cn: `[è‰ç¨¿] 2019å¹´åº¦ç¨åŠ¡ç”³æŠ¥è°ƒæ•´æ–¹æ¡ˆ
...ï¼ˆå¤§é‡æ¯ç‡¥çš„ç¨åŠ¡æ¡æ–‡ï¼‰...
æ‰¹æ³¨ï¼šè¯·ä¸‹å‘¨ä¸€å‰ç¡®è®¤ã€‚`,
                en: `[DRAFT] 2019 Tax Filing Adjustment Plan
...(Boring tax regulations)...
Note: Please confirm by next Monday.`
            }
        },
        '/archives/FIN/F-2005': {
            type: 'folder',
            children: ['20190422'] // å¯¹åº” audit_trail.log é‡Œçš„è®°å½•
        },
        '/archives/FIN/F-2005/20190422': {
            type: 'folder',
            children: ['payroll_apr.xlsx'] // æ—¥å¿—é‡Œæåˆ°è¿‡çš„å·¥èµ„å•
        },
        '/archives/FIN/F-2005/20190422/payroll_apr.xlsx': {
            type: 'file',
            content: {
                cn: `[ç³»ç»Ÿæç¤º]
æ— æ³•é¢„è§ˆï¼šæ–‡ä»¶æ ¼å¼å·²æŸåæˆ–ä½¿ç”¨äº†ä¸æ”¯æŒçš„ç¼–ç ã€‚
(å®é™…ä¸Šè¿™åªæ˜¯ä¸€ä¸ªæ™®é€šå·¥èµ„å•æ–‡ä»¶)`,
                en: `[SYSTEM NOTICE]
Preview Failed: File corrupted or unsupported encoding.
(Actually just a regular payroll file)`
            }
        },

        // ----- HRD äººäº‹å¤„ -----
        '/archives/HRD': {
            type: 'folder',
            children: ['H-3001', 'H-3002', 'H-3003']
        },
        '/archives/HRD/H-3001': {
            type: 'folder',
            children: ['20190210']
        },
        '/archives/HRD/H-3001/20190210': {
            type: 'folder',
            children: ['personnel_review.docx']
        },
        '/archives/HRD/H-3001/20190210/personnel_review.docx': {
            type: 'file',
            content: {
                cn: `[äººäº‹å¤„æ–‡ä»¶]

2018å¹´åº¦æ•™èŒå·¥è€ƒæ ¸æ±‡æ€»

è¿™æ˜¯äººäº‹è€ƒæ ¸æ–‡ä»¶ï¼Œä¸è´¢åŠ¡è®°å½•æ— å…³ã€‚`,
                en: `[HR Document]

2018 Annual Staff Performance Review

This is HR review document. Unrelated to financial records.`
            }
        },'/archives/HRD/H-3002': {
            type: 'folder',
            children: [] // ç©ºæ–‡ä»¶å¤¹ï¼Œå¹²æ‰°é¡¹
        },
        '/archives/HRD/H-3003': {
            type: 'folder',
            children: ['archive_rules.txt']
        },
        '/archives/HRD/H-3003/archive_rules.txt': {
            type: 'file',
            content: {
                cn: `æ¡£æ¡ˆå®¤ç®¡ç†è§„å®šï¼š
1. è¿›å‡ºå¿…é¡»ç™»è®°ã€‚
2. ä¸¥ç¦æºå¸¦é£Ÿç‰©å’Œæ°´ã€‚
3. åªæœ‰å´å¿—åˆšæŒæœ‰å¤‡ç”¨é’¥åŒ™ã€‚`,
                en: `Archive Room Rules:
1. Registration required for entry/exit.
2. No food or water allowed.
3. Only Wu Zhigang holds the spare key.`
            }
        },

        // ----- LOG åå‹¤å¤„ -----
        '/archives/LOG': {
            type: 'folder',
            children: ['L-4001', 'L-4002', 'L-4003']
        },
        '/archives/LOG/L-4001': {
            type: 'folder',
            children: ['20190305']
        },
        '/archives/LOG/L-4001/20190305': {
            type: 'folder',
            children: ['maintenance_log.xlsx']
        },
        '/archives/LOG/L-4001/20190305/maintenance_log.xlsx': {
            type: 'file',
            content: {
                cn: `[åå‹¤å¤„æ–‡ä»¶]

æ ¡å›­è®¾æ–½ç»´ä¿®è®°å½•

æ°´ç”µç»´ä¿®ã€ç»¿åŒ–å…»æŠ¤ç­‰æ—¥å¸¸è®°å½•ã€‚`,
                en: `[Logistics Document]

Campus Facility Maintenance Log

Utilities, landscaping and other routine records.`
            }
        },'/archives/LOG/L-4002': {
            type: 'folder',
            children: ['procurement_list.csv']
        },
        '/archives/LOG/L-4002/procurement_list.csv': {
            type: 'file',
            content: {
                cn: `å“å, æ•°é‡, å¤‡æ³¨
A4æ‰“å°çº¸, 50ç®±, æ­£å¸¸
é»‘è‰²ç­¾å­—ç¬”, 20ç›’, æ­£å¸¸
å®éªŒå®¤ä¸“ç”¨æ¸…æ´å‰‚, 5æ¡¶, åŠ æ€¥`,
                en: `Item, Qty, Note
A4 Paper, 50 boxes, Normal
Black Pens, 20 boxes, Normal
Lab Cleaner, 5 drums, Urgent`
            }
        },
        '/archives/LOG/L-4003': {
            type: 'folder',
            children: [] // ä¹Ÿæ˜¯ç©ºçš„
        }
    };

    // ===========================================
    // TERMINAL STATE (é‡æ„ç‰ˆ)
    // ===========================================
    let currentPath = '/';
    let commandHistory = [];
    let historyIndex = -1;
    let decryptedPaths = {};  // æ›¿ä»£åŸæ¥çš„ isDecryptedï¼ŒæŒ‰è·¯å¾„è¿½è¸ªè§£å¯†çŠ¶æ€
    let matrixGameActive = false;
    let currentDecryptPath = null;  // å½“å‰æ­£åœ¨è§£å¯†çš„è·¯å¾„
    let currentDecryptLevels = null;  // å½“å‰ä½¿ç”¨çš„è§£å¯†é…ç½®

    const outputEl = document.getElementById('terminal-output');
    const inputEl = document.getElementById('terminal-input');
    const promptEl = document.getElementById('prompt');

    // ===========================================
    // TERMINAL OUTPUT FUNCTIONS
    // ===========================================
    function print(text, className = '') {
        const line = document.createElement('div');
        line.className = 'output-line ' + className;
        line.innerHTML = text;
        outputEl.appendChild(line);
        outputEl.scrollTop = outputEl.scrollHeight;
    }

    function printAscii(text) {
        const line = document.createElement('div');
        line.className = 'output-line ascii-art';
        line.textContent = text;
        outputEl.appendChild(line);
        outputEl.scrollTop = outputEl.scrollHeight;
    }

    function clearOutput() {
        outputEl.innerHTML = '';
    }

    function updatePrompt() {
        const displayPath = currentPath === '/' ? '/' : currentPath;
        promptEl.textContent = `guest@server:${displayPath}$`;
    }

    // ===========================================
    // FILE SYSTEM FUNCTIONS
    // ===========================================
    function resolvePath(input) {
        if (input.startsWith('/')) return input;
        if (currentPath === '/') return '/' + input;
        return currentPath + '/' + input;
    }

    function getNode(path) {
        // Normalize path
        path = path.replace(/\/+/g, '/').replace(/\/$/, '') || '/';
        return FILE_SYSTEM[path];
    }

    function getCurrentFolder() {
        return getNode(currentPath);
    }

    // æ£€æŸ¥è·¯å¾„æ˜¯å¦å·²è§£å¯†
    function isPathDecrypted(path) {
        return decryptedPaths[path] === true;
    }

    // ===========================================
    // COMMAND HANDLERS
    // ===========================================
    function cmdWhere() {
        const displayPath = currentPath === '/' ? '/' : currentPath;
        print(t(`ğŸ“ å½“å‰ä½ç½®: ${displayPath}`, `ğŸ“ Current location: ${displayPath}`), 'info');
    }

    function cmdLook() {
        const folder = getCurrentFolder();

        if (!folder || !folder.children || folder.children.length === 0) {
            print(t('(è¿™é‡Œä»€ä¹ˆéƒ½æ²¡æœ‰)', '(Nothing here)'), 'system');
            return;
        }

        print(t('æ­£åœ¨æ‰«æå½“å‰ç›®å½•...', 'Scanning current directory...'), 'system');
        print('', '');

        folder.children.forEach(child => {
            const childPath = currentPath === '/' ? '/' + child : currentPath + '/' + child;
            const childNode = getNode(childPath);

            let icon = '';
            let label = '';
            let cssClass = '';

            if (childNode.type === 'folder') {
                if (childNode.encrypted && !isPathDecrypted(childPath)) {
                    if (childNode.encryptLevel === 3) {
                        icon = 'ğŸ”';
                        label = t('[é«˜å¼ºåº¦åŠ å¯†]', '[High Encryption]');
                    } else {
                        icon = 'ğŸ”’';
                        label = t('[å·²åŠ å¯†]', '[Encrypted]');
                    }
                    cssClass = 'warning';
                } else {
                    icon = 'ğŸ“';
                    label = t('[æ–‡ä»¶å¤¹]', '[Folder]');
                    cssClass = 'info';
                }
            } else {
                if (childNode.encrypted && !isPathDecrypted(childPath)) {
                    if (childNode.encryptLevel === 3) {
                        icon = 'ğŸ”';
                        label = t('[é«˜å¼ºåº¦åŠ å¯†]', '[High Encryption]');
                    } else {
                        icon = 'ğŸ”’';
                        label = t('[å·²åŠ å¯†]', '[Encrypted]');
                    }
                    cssClass = 'warning';
                } else if (childNode.isTarget) {
                    icon = 'â­';
                    label = t('[ç›®æ ‡æ–‡ä»¶]', '[Target]');
                    cssClass = 'success';
                } else {
                    icon = 'ğŸ“„';
                    label = t('[æ–‡ä»¶]', '[File]');
                    cssClass = '';
                }
            }

            const name = child + (childNode.type === 'folder' ? '/' : '');
            print(`  ${icon} ${name}  <span style="opacity: 0.6">${label}</span>`, cssClass);
        });

        print('', '');
    }

    function cmdOpen(target) {
        if (!target) {
            print(t('[é”™è¯¯] ç”¨æ³•: open <ç›®å½•/æ–‡ä»¶å>', '[ERROR] Usage: open <folder/filename>'), 'error');
            return;
        }

        const fullPath = resolvePath(target.replace(/\/$/, ''));
        const node = getNode(fullPath);

        if (!node) {
            print(t(`[é”™è¯¯] æœªæ‰¾åˆ°: ${target}`, `[ERROR] Not found: ${target}`), 'error');
            return;
        }

        if (node.type === 'folder') {
            // Check encryption
            if (node.encrypted && !isPathDecrypted(fullPath)) {
                print(t('[æ‹’ç»è®¿é—®] ç›®å½•å·²åŠ å¯†', '[ACCESS DENIED] Directory is encrypted'), 'error');
                print(t(`ä½¿ç”¨ 'decrypt ${target}' è§£é”æ­¤ç›®å½•`, `Use 'decrypt ${target}' to unlock`), 'warning');
                return;
            }

            currentPath = fullPath;
            updatePrompt();
            print(t(`å·²è¿›å…¥: ${fullPath}`, `Entered: ${fullPath}`), 'system');

            // List contents
            const children = node.children;
            if (children && children.length > 0) {
                const listDiv = document.createElement('div');
                listDiv.className = 'dir-listing';

                children.forEach(child => {
                    const childPath = fullPath === '/' ? '/' + child : fullPath + '/' + child;
                    const childNode = getNode(childPath);
                    const item = document.createElement('div');
                    item.className = 'dir-item';

                    if (childNode.type === 'folder') {
                        if (childNode.encrypted && !isPathDecrypted(childPath)) {
                            item.classList.add(childNode.encryptLevel === 3 ? 'encrypted-high' : 'encrypted');
                        } else {
                            item.classList.add('folder');
                        }
                    } else {
                        if (childNode.encrypted && !isPathDecrypted(childPath)) {
                            item.classList.add(childNode.encryptLevel === 3 ? 'encrypted-high' : 'encrypted');
                        } else if (childNode.isTarget) {
                            item.classList.add('target');
                        } else {
                            item.classList.add('file');
                        }
                    }
                    item.textContent = child + (childNode.type === 'folder' ? '/' : '');
                    listDiv.appendChild(item);
                });

                outputEl.appendChild(listDiv);
                outputEl.scrollTop = outputEl.scrollHeight;
            } else {
                print(t('(ç©ºç›®å½•)', '(empty directory)'), 'system');
            }
        } else {
            // File - check encryption first
            if (node.encrypted && !isPathDecrypted(fullPath)) {
                print(t('[æ‹’ç»è®¿é—®] æ–‡ä»¶å·²åŠ å¯†', '[ACCESS DENIED] File is encrypted'), 'error');
                print(t(`ä½¿ç”¨ 'decrypt ${target}' è§£é”æ­¤æ–‡ä»¶`, `Use 'decrypt ${target}' to unlock`), 'warning');
                return;
            }

            // File - show content
            print(`â”€â”€ ${target} â”€â”€`, 'info');
            const content = node.content[currentLang] || node.content.cn;
            print(content.replace(/\n/g, '<br>'), 'file-content');
            print('â”€â”€ EOF â”€â”€', 'info');
        }
    }

    function cmdBack() {
        if (currentPath === '/') {
            print(t('[æç¤º] å·²åœ¨æ ¹ç›®å½•', '[INFO] Already at root'), 'system');
            return;
        }

        const parts = currentPath.split('/').filter(p => p);
        parts.pop();
        currentPath = '/' + parts.join('/') || '/';
        updatePrompt();
        print(t(`è¿”å›: ${currentPath}`, `Returned to: ${currentPath}`), 'system');
    }

    function cmdDownload(target) {
        if (!target) {
            print(t('[é”™è¯¯] ç”¨æ³•: download <æ–‡ä»¶å>', '[ERROR] Usage: download <filename>'), 'error');
            return;
        }

        const fullPath = resolvePath(target);
        const node = getNode(fullPath);

        if (!node) {
            print(t(`[é”™è¯¯] æœªæ‰¾åˆ°: ${target}`, `[ERROR] Not found: ${target}`), 'error');
            return;
        }

        if (node.type === 'folder') {
            print(t('[é”™è¯¯] æ— æ³•ä¸‹è½½æ–‡ä»¶å¤¹', '[ERROR] Cannot download a folder'), 'error');
            return;
        }

        // Check if file is encrypted
        if (node.encrypted && !isPathDecrypted(fullPath)) {
            print(t('[æ‹’ç»è®¿é—®] æ–‡ä»¶å·²åŠ å¯†ï¼Œæ— æ³•ä¸‹è½½', '[ACCESS DENIED] File is encrypted, cannot download'), 'error');
            print(t(`ä½¿ç”¨ 'decrypt ${target}' è§£é”æ­¤æ–‡ä»¶`, `Use 'decrypt ${target}' to unlock`), 'warning');
            return;
        }

        // Start download animation
        playDownloadAnimation(target, node.isTarget);
    }

    function playDownloadAnimation(filename, isTarget) {
        print(t('[ç³»ç»Ÿ] æ­£åœ¨åˆå§‹åŒ–å®‰å…¨ä¼ è¾“...', '[SYSTEM] Initializing secure transfer...'), 'system');

        const progressDiv = document.createElement('div');
        progressDiv.className = 'download-progress';
        progressDiv.innerHTML = `
                <div class="progress-bar-container">
                    <div class="progress-bar-fill" id="dl-progress"></div>
                </div>
                <div class="progress-text" id="dl-text">0%</div>
            `;
        outputEl.appendChild(progressDiv);
        outputEl.scrollTop = outputEl.scrollHeight;

        const progressBar = document.getElementById('dl-progress');
        const progressText = document.getElementById('dl-text');

        const stages = [
            { pct: 25, text: { cn: 'å»ºç«‹åŠ å¯†éš§é“...', en: 'Establishing encrypted tunnel...' } },
            { pct: 50, text: { cn: 'ç»•è¿‡é˜²ç«å¢™...', en: 'Bypassing firewall...' } },
            { pct: 75, text: { cn: 'æ£€æµ‹åˆ°è¿½è¸ªç¨‹åºï¼Œè§„é¿ä¸­...', en: 'Tracker detected, evading...' } },
            { pct: 100, text: { cn: 'ä¼ è¾“å®Œæˆ', en: 'Transfer complete' } }
        ];

        let stageIndex = 0;

        const interval = setInterval(() => {
            if (stageIndex >= stages.length) {
                clearInterval(interval);
                print('', '');
                print(t(`>> ${filename} å·²å®‰å…¨è·å–`, `>> ${filename} secured`), 'success');

                if (isTarget) {
                    print(t('>> æ–­å¼€è¿æ¥...', '>> Disconnecting...'), 'success');
                    setTimeout(() => {
                        triggerMissionComplete();
                    }, 1000);
                }
                return;
            }

            const stage = stages[stageIndex];
            progressBar.style.width = stage.pct + '%';
            progressText.textContent = `${stage.pct}% - ${stage.text[currentLang]}`;
            stageIndex++;
        }, 800);
    }

    function cmdDecrypt(target) {
        if (!target) {
            print(t('[é”™è¯¯] ç”¨æ³•: decrypt <ç›®å½•/æ–‡ä»¶å>', '[ERROR] Usage: decrypt <folder/filename>'), 'error');
            return;
        }

        const fullPath = resolvePath(target.replace(/\/$/, ''));
        const node = getNode(fullPath);

        if (!node) {
            print(t(`[é”™è¯¯] æœªæ‰¾åˆ°: ${target}`, `[ERROR] Not found: ${target}`), 'error');
            return;
        }

        if (!node.encrypted) {
            print(t('[æç¤º] æ­¤ç›®æ ‡æœªåŠ å¯†', '[INFO] Target is not encrypted'), 'system');
            return;
        }

        if (isPathDecrypted(fullPath)) {
            print(t('[æç¤º] å·²è§£å¯†', '[INFO] Already decrypted'), 'system');
            return;
        }

        // ç¡®å®šè§£å¯†å±‚æ•°
        const encryptLevel = node.encryptLevel || 1;
        currentDecryptPath = fullPath;

        // Start Matrix mini-game
        print(t('[ç³»ç»Ÿ] å¯åŠ¨è§£å¯†åè®®...', '[SYSTEM] Initiating decryption protocol...'), 'system');

        if (encryptLevel === 1) {
            print(t('[ç³»ç»Ÿ] æ£€æµ‹åˆ° MATRIX_LOCK v1.0 - å•å±‚åŠ å¯†', '[SYSTEM] Detected MATRIX_LOCK v1.0 - Single Layer'), 'warning');
            currentDecryptLevels = MATRIX_LEVELS_1;
        } else {
            print(t('[ç³»ç»Ÿ] æ£€æµ‹åˆ° MATRIX_LOCK v3.0 - ä¸‰å±‚åŠ å¯†', '[SYSTEM] Detected MATRIX_LOCK v3.0 - Triple Layer'), 'warning');
            currentDecryptLevels = MATRIX_LEVELS_3;
        }

        setTimeout(() => {
            startMatrixGame();
        }, 500);
    }

    function cmdHelp() {
        print('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—', 'info');
        print('â•‘         ' + t('å¯ç”¨å‘½ä»¤åˆ—è¡¨', 'AVAILABLE COMMANDS') + '            â•‘', 'info');
        print('â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£', 'info');
        print('â•‘  where           ' + t('æ˜¾ç¤ºå½“å‰ä½ç½®', 'Show location') + '       â•‘', 'info');
        print('â•‘  look            ' + t('æŸ¥çœ‹ç›®å½•å†…å®¹', 'List contents') + '       â•‘', 'info');
        print('â•‘  open <n>     ' + t('æ‰“å¼€ç›®å½•/æ–‡ä»¶', 'Open folder/file') + '     â•‘', 'info');
        print('â•‘  back            ' + t('è¿”å›ä¸Šçº§ç›®å½•', 'Go to parent dir') + '     â•‘', 'info');
        print('â•‘  download <file> ' + t('ä¸‹è½½æ–‡ä»¶', 'Download file') + '         â•‘', 'info');
        print('â•‘  decrypt <n>  ' + t('è§£å¯†ç›®å½•/æ–‡ä»¶', 'Decrypt target') + '     â•‘', 'info');
        print('â•‘  clear           ' + t('æ¸…ç©ºå±å¹•', 'Clear screen') + '           â•‘', 'info');
        print('â•‘  help            ' + t('æ˜¾ç¤ºæ­¤å¸®åŠ©', 'Show this help') + '        â•‘', 'info');

        print('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'info');
    }

    function cmdClear() {
        clearOutput();
    }

    // ===========================================
    // MATRIX MINI-GAME (æ”¯æŒå¤šå±‚çº§)
    // ===========================================
    // å•å±‚è§£å¯†é…ç½®
    const MATRIX_LEVELS_1 = [
        { gridSize: 5, seqLength: 4, bufferSize: 6, timeLimit: 15.0 }
    ];

    // ä¸‰å±‚è§£å¯†é…ç½®
    const MATRIX_LEVELS_3 = [
        { gridSize: 4, seqLength: 3, bufferSize: 5, timeLimit: 15.0 },
        { gridSize: 5, seqLength: 4, bufferSize: 6, timeLimit: 12.0 },
        { gridSize: 6, seqLength: 5, bufferSize: 7, timeLimit: 10.0 }
    ];

    let matrixState = {
        currentLevel: 0,
        totalLevels: 1,
        grid: [],
        targetSeq: [],
        buffer: [],
        bufferSize: 5,
        axis: 0,
        lastIndex: { r: 0, c: -1 },
        selectedCells: new Set(),
        timerInterval: null,
        timeLeft: 0,
        hasStarted: false
    };

    function startMatrixGame() {
        matrixState.currentLevel = 0;
        matrixState.totalLevels = currentDecryptLevels.length;
        matrixGameActive = true;
        inputEl.disabled = true;
        loadMatrixLevel(0);
    }

    function loadMatrixLevel(levelIndex) {
        const config = currentDecryptLevels[levelIndex];
        matrixState.currentLevel = levelIndex;
        matrixState.grid = [];
        matrixState.targetSeq = [];
        matrixState.buffer = [];
        matrixState.bufferSize = config.bufferSize;
        matrixState.axis = 0;
        matrixState.lastIndex = { r: 0, c: -1 };
        matrixState.selectedCells = new Set();

        matrixState.timeLeft = config.timeLimit;
        matrixState.hasStarted = false;
        if (matrixState.timerInterval) clearInterval(matrixState.timerInterval);

        const hexChars = ['1C', '55', '7A', 'BD', 'E9', 'FF'];

        for (let r = 0; r < config.gridSize; r++) {
            let row = [];
            for (let c = 0; c < config.gridSize; c++) {
                row.push(hexChars[Math.floor(Math.random() * hexChars.length)]);
            }
            matrixState.grid.push(row);
        }

        matrixState.targetSeq = generateSolvableSequence(
            matrixState.grid,
            config.seqLength,
            config.gridSize
        );

        renderMatrixUI();
    }

    function generateSolvableSequence(grid, seqLength, gridSize) {
        let sequence = [];
        let axis = 0;
        let currentRow = 0;
        let currentCol = -1;
        let usedCells = new Set();

        for (let i = 0; i < seqLength; i++) {
            let validCells = [];

            if (axis === 0) {
                for (let c = 0; c < gridSize; c++) {
                    const key = `${currentRow},${c}`;
                    if (!usedCells.has(key)) {
                        validCells.push({ r: currentRow, c: c, val: grid[currentRow][c] });
                    }
                }
            } else {
                for (let r = 0; r < gridSize; r++) {
                    const key = `${r},${currentCol}`;
                    if (!usedCells.has(key)) {
                        validCells.push({ r: r, c: currentCol, val: grid[r][currentCol] });
                    }
                }
            }

            if (validCells.length === 0) break;

            const pick = validCells[Math.floor(Math.random() * validCells.length)];
            sequence.push(pick.val);
            usedCells.add(`${pick.r},${pick.c}`);
            currentRow = pick.r;
            currentCol = pick.c;
            axis = 1 - axis;
        }

        return sequence;
    }

    function startTimer() {
        if (matrixState.hasStarted) return;
        matrixState.hasStarted = true;

        const timerEl = document.getElementById('matrix-timer-val');

        matrixState.timerInterval = setInterval(() => {
            matrixState.timeLeft -= 0.1;
            if (timerEl) {
                timerEl.textContent = matrixState.timeLeft.toFixed(2);
            }

            if (matrixState.timeLeft <= 0) {
                clearInterval(matrixState.timerInterval);
                if (timerEl) timerEl.textContent = "0.00";
                matrixFailed(true);
            }
        }, 100);
    }

    function renderMatrixUI() {
        const config = currentDecryptLevels[matrixState.currentLevel];

        const container = document.createElement('div');
        container.className = 'matrix-container';
        container.id = 'matrix-container';

        const header = document.createElement('div');
        header.className = 'matrix-header';
        header.innerHTML = `
                <span class="matrix-level">${t('è§£å¯†å±‚çº§', 'DECRYPTION LAYER')} ${matrixState.currentLevel + 1}/${matrixState.totalLevels}</span>
                <span style="color: #ff3333; font-weight: bold;">
                    T-MINUS: <span id="matrix-timer-val">${config.timeLimit.toFixed(2)}</span>s
                </span>
                <span class="matrix-progress">${config.gridSize}Ã—${config.gridSize} | ${t('åºåˆ—', 'SEQ')}: ${config.seqLength}</span>
            `;
        container.appendChild(header);

        const body = document.createElement('div');
        body.className = 'matrix-body';

        const left = document.createElement('div');
        left.className = 'matrix-left';

        const seqDisplay = document.createElement('div');
        seqDisplay.className = 'sequence-display';
        seqDisplay.innerHTML = `<div class="sequence-label">${t('ç›®æ ‡åºåˆ—', 'TARGET SEQUENCE')}</div>`;
        const seqBoxes = document.createElement('div');
        seqBoxes.className = 'sequence-boxes';
        seqBoxes.id = 'target-seq-boxes';
        matrixState.targetSeq.forEach((val, i) => {
            const box = document.createElement('div');
            box.className = 'seq-box';
            box.textContent = val;
            box.dataset.index = i;
            seqBoxes.appendChild(box);
        });
        seqDisplay.appendChild(seqBoxes);
        left.appendChild(seqDisplay);

        const bufDisplay = document.createElement('div');
        bufDisplay.className = 'buffer-display';
        bufDisplay.innerHTML = `<div class="sequence-label">${t('ç¼“å†²åŒº', 'BUFFER')} (${matrixState.bufferSize})</div>`;
        const bufBoxes = document.createElement('div');
        bufBoxes.className = 'buffer-boxes';
        bufBoxes.id = 'buffer-boxes';
        for (let i = 0; i < matrixState.bufferSize; i++) {
            const box = document.createElement('div');
            box.className = 'buf-box';
            box.dataset.index = i;
            bufBoxes.appendChild(box);
        }
        bufDisplay.appendChild(bufBoxes);
        left.appendChild(bufDisplay);

        body.appendChild(left);

        const gridDiv = document.createElement('div');
        gridDiv.className = 'matrix-grid';
        gridDiv.id = 'matrix-grid';
        gridDiv.style.gridTemplateColumns = `repeat(${config.gridSize}, 44px)`;

        matrixState.grid.forEach((row, r) => {
            row.forEach((val, c) => {
                const cell = document.createElement('div');
                cell.className = 'matrix-cell';
                cell.textContent = val;
                cell.dataset.r = r;
                cell.dataset.c = c;
                cell.onclick = () => handleMatrixClick(r, c, val, cell);
                gridDiv.appendChild(cell);
            });
        });

        body.appendChild(gridDiv);
        container.appendChild(body);

        const hint = document.createElement('div');
        hint.className = 'matrix-hint';
        hint.innerHTML = t(
            'è§„åˆ™: å¿…é¡»è¿ç»­åŒ¹é…ç›®æ ‡åºåˆ—ã€‚ç‚¹å‡»ç¬¬ä¸€ä¸ªæ–¹å—å¼€å§‹è®¡æ—¶ã€‚',
            'Rule: Match sequence continuously. Timer starts on first click.'
        );
        container.appendChild(hint);

        outputEl.appendChild(container);
        outputEl.scrollTop = outputEl.scrollHeight;

        updateMatrixHighlights();
    }

    function updateMatrixHighlights() {
        const cells = document.querySelectorAll('#matrix-grid .matrix-cell');
        cells.forEach(cell => {
            const r = parseInt(cell.dataset.r);
            const c = parseInt(cell.dataset.c);
            const key = `${r},${c}`;

            cell.classList.remove('active-zone', 'disabled');

            if (matrixState.selectedCells.has(key)) {
                return;
            }

            if (matrixState.lastIndex.c === -1) {
                if (r === 0) {
                    cell.classList.add('active-zone');
                } else {
                    cell.classList.add('disabled');
                }
            } else {
                if (matrixState.axis === 0) {
                    if (r === matrixState.lastIndex.r) cell.classList.add('active-zone');
                    else cell.classList.add('disabled');
                } else {
                    if (c === matrixState.lastIndex.c) cell.classList.add('active-zone');
                    else cell.classList.add('disabled');
                }
            }
        });

        const remaining = matrixState.bufferSize - matrixState.buffer.length;
        const bufBoxes = document.querySelectorAll('#buffer-boxes .buf-box');
        bufBoxes.forEach((box, i) => {
            if (i >= matrixState.buffer.length && remaining <= 2) {
                box.classList.add('overflow-warning');
            } else {
                box.classList.remove('overflow-warning');
            }
        });
    }

    function handleMatrixClick(r, c, val, cellElement) {
        if (!matrixGameActive) return;
        if (matrixState.selectedCells.has(`${r},${c}`)) return;
        if (!cellElement.classList.contains('active-zone')) return;

        if (!matrixState.hasStarted) {
            startTimer();
        }

        matrixState.buffer.push(val);
        matrixState.selectedCells.add(`${r},${c}`);
        cellElement.classList.add('selected');
        cellElement.classList.remove('active-zone');

        const bufBoxes = document.querySelectorAll('#buffer-boxes .buf-box');
        const bufIndex = matrixState.buffer.length - 1;
        if (bufBoxes[bufIndex]) {
            bufBoxes[bufIndex].textContent = val;
            bufBoxes[bufIndex].classList.add('filled');
        }

        const matchResult = checkSequenceMatch();

        matrixState.lastIndex = { r: r, c: c };
        matrixState.axis = 1 - matrixState.axis;

        if (matchResult === 'WIN') {
            matrixLevelComplete();
            return;
        }

        if (matrixState.buffer.length >= matrixState.bufferSize) {
            matrixFailed(false);
            return;
        }

        updateMatrixHighlights();
    }

    function checkSequenceMatch() {
        const targetStr = matrixState.targetSeq.join(',');
        const bufferStr = matrixState.buffer.join(',');

        if (bufferStr.includes(targetStr)) {
            const seqBoxes = document.querySelectorAll('#target-seq-boxes .seq-box');
            seqBoxes.forEach(box => box.classList.add('matched'));
            return 'WIN';
        }

        const seqBoxes = document.querySelectorAll('#target-seq-boxes .seq-box');
        seqBoxes.forEach(box => box.classList.remove('matched'));

        let matchCount = 0;
        const targetLen = matrixState.targetSeq.length;
        const bufferLen = matrixState.buffer.length;

        for (let len = Math.min(targetLen, bufferLen); len > 0; len--) {
            const subBuffer = matrixState.buffer.slice(bufferLen - len);
            const subTarget = matrixState.targetSeq.slice(0, len);
            if (subBuffer.join(',') === subTarget.join(',')) {
                matchCount = len;
                break;
            }
        }

        for (let i = 0; i < matchCount; i++) {
            seqBoxes[i].classList.add('matched');
        }

        return 'CONTINUE';
    }

    function matrixLevelComplete() {
        if (matrixState.timerInterval) clearInterval(matrixState.timerInterval);

        const container = document.getElementById('matrix-container');
        if (container) {
            container.style.borderColor = '#33ff33';
            container.style.boxShadow = '0 0 20px rgba(50, 255, 50, 0.3)';
        }

        print(t(`[æˆåŠŸ] ç¬¬ ${matrixState.currentLevel + 1} å±‚è§£å¯†å®Œæˆ!`,
            `[SUCCESS] Layer ${matrixState.currentLevel + 1} decrypted!`), 'success');

        setTimeout(() => {
            if (container) container.remove();

            if (matrixState.currentLevel < matrixState.totalLevels - 1) {
                print(t('[ç³»ç»Ÿ] åŠ è½½ä¸‹ä¸€å±‚åŠ å¯†...', '[SYSTEM] Loading next encryption layer...'), 'system');
                setTimeout(() => {
                    loadMatrixLevel(matrixState.currentLevel + 1);
                }, 800);
            } else {
                matrixGameComplete();
            }
        }, 1000);
    }

    function matrixFailed(isTimeout) {
        if (matrixState.timerInterval) clearInterval(matrixState.timerInterval);

        const container = document.getElementById('matrix-container');
        if (container) {
            container.style.borderColor = '#ff3333';
            container.style.boxShadow = '0 0 20px rgba(255, 50, 50, 0.3)';
        }

        const failMsg = isTimeout
            ? t('[å¤±è´¥] è¿æ¥è¶…æ—¶ - è¿½è¸ªç¨‹åºå·²é”å®š', '[FAILED] Connection Timeout - Trace complete')
            : t('[å¤±è´¥] ç¼“å†²åŒºæº¢å‡º - å“ˆå¸ŒéªŒè¯å¤±è´¥', '[FAILED] Buffer overflow - Hash mismatch');

        print(failMsg, 'error');

        setTimeout(() => {
            if (container) container.remove();

            matrixGameActive = false;
            matrixState.hasStarted = false;

            inputEl.disabled = false;
            inputEl.focus();

            print(t('[è­¦å‘Š] å®‰å…¨åè®®è§¦å‘ï¼Œè¿æ¥å·²æ–­å¼€ã€‚', '[WARNING] Security protocol triggered. Connection dropped.'), 'warning');
            print(t("è¯·é‡æ–°è¾“å…¥ 'decrypt' å°è¯•å»ºç«‹æ–°è¿æ¥ã€‚", "Please re-enter 'decrypt' to attempt new connection."), 'system');

            updatePrompt();
        }, 1500);
    }

    function matrixGameComplete() {
        matrixGameActive = false;
        inputEl.disabled = false;
        inputEl.focus();

        // è®°å½•è§£å¯†çŠ¶æ€
        decryptedPaths[currentDecryptPath] = true;

        // è·å–è§£å¯†ç›®æ ‡ä¿¡æ¯
        const node = getNode(currentDecryptPath);
        const targetName = currentDecryptPath.split('/').pop();

        // Victory ASCII art
        print('', '');
        printAscii('â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“');
        printAscii('â–“â–“                                  â–“â–“');
        printAscii('â–“â–“     â–ˆâ–ˆ ACCESS GRANTED â–ˆâ–ˆ        â–“â–“');
        printAscii('â–“â–“                                  â–“â–“');
        printAscii('â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“');
        print('', '');

        if (node.type === 'folder') {
            print(t(`[ç³»ç»Ÿ] ${targetName}/ ç›®å½•å·²è§£é”`, `[SYSTEM] ${targetName}/ directory unlocked`), 'success');
            print(t(`ä½¿ç”¨ 'open ${targetName}' è¿›å…¥ç›®å½•`, `Use 'open ${targetName}' to enter directory`), 'info');
        } else {
            print(t(`[ç³»ç»Ÿ] ${targetName} æ–‡ä»¶å·²è§£é”`, `[SYSTEM] ${targetName} file unlocked`), 'success');
            print(t(`ä½¿ç”¨ 'open ${targetName}' æŸ¥çœ‹å†…å®¹ï¼Œæˆ– 'download ${targetName}' ä¸‹è½½`,
                `Use 'open ${targetName}' to view, or 'download ${targetName}' to download`), 'info');
        }

        currentDecryptPath = null;
        currentDecryptLevels = null;
    }

    // ===========================================
    // MISSION COMPLETE
    // ===========================================
    function triggerMissionComplete() {
        document.getElementById('success-overlay').classList.add('visible');

        setTimeout(() => {
            console.log('[Terminal] Sending complete message to parent...');
            window.parent.postMessage({
                type: 'minigame-complete',
                result: { success: true }
            }, '*');
        }, 2000);
    }

    // ===========================================
    // TAB COMPLETION
    // ===========================================
    function getCompletions(input) {
        const parts = input.trim().split(/\s+/);
        const commands = ['where', 'look', 'open', 'back', 'download', 'decrypt', 'clear', 'help'];

        if (parts.length === 1) {
            const partial = parts[0].toLowerCase();
            return commands.filter(cmd => cmd.startsWith(partial));
        } else if (parts.length === 2) {
            const cmd = parts[0].toLowerCase();
            const partial = parts[1].toLowerCase();
            const folder = getCurrentFolder();

            if (folder && folder.children) {
                return folder.children
                    .filter(name => name.toLowerCase().startsWith(partial))
                    .map(name => {
                        const fullPath = currentPath === '/' ? '/' + name : currentPath + '/' + name;
                        const node = getNode(fullPath);
                        return name + (node && node.type === 'folder' ? '/' : '');
                    });
            }
        }

        return [];
    }

    // ===========================================
    // COMMAND PARSER
    // ===========================================
    function executeCommand(input) {
        const trimmed = input.trim();
        if (!trimmed) return;

        print(`<span style="color: var(--accent-cyan)">$</span> ${trimmed}`, '');

        commandHistory.push(trimmed);
        historyIndex = commandHistory.length;

        const parts = trimmed.split(/\s+/);
        const cmd = parts[0].toLowerCase();
        const args = parts.slice(1).join(' ');

        switch (cmd) {
            case 'where':
                cmdWhere();
                break;
            case 'look':
                cmdLook();
                break;
            case 'open':
                cmdOpen(args);
                break;
            case 'back':
                cmdBack();
                break;
            case 'download':
                cmdDownload(args);
                break;
            case 'decrypt':
                cmdDecrypt(args);
                break;
            case 'clear':
                cmdClear();
                break;
            case 'help':
                cmdHelp();
                break;
            default:
                print(t(`[é”™è¯¯] æœªçŸ¥å‘½ä»¤: ${cmd}`, `[ERROR] Unknown command: ${cmd}`), 'error');
                print(t("è¾“å…¥ 'help' æŸ¥çœ‹å¯ç”¨å‘½ä»¤", "Type 'help' for available commands"), 'system');
        }
    }

    // ===========================================
    // INPUT HANDLING
    // ===========================================
    inputEl.addEventListener('keydown', function(e) {
        if (matrixGameActive) {
            e.preventDefault();
            return;
        }

        if (e.key === 'Enter') {
            e.preventDefault();
            const cmd = inputEl.value;
            inputEl.value = '';
            executeCommand(cmd);
        } else if (e.key === 'Tab') {
            e.preventDefault();
            const completions = getCompletions(inputEl.value);

            if (completions.length === 1) {
                const parts = inputEl.value.trim().split(/\s+/);
                if (parts.length === 1) {
                    inputEl.value = completions[0] + ' ';
                } else {
                    inputEl.value = parts[0] + ' ' + completions[0];
                }
            } else if (completions.length > 1) {
                print(t('å¯é€‰: ', 'Options: ') + completions.join('  '), 'system');
            }
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            if (historyIndex > 0) {
                historyIndex--;
                inputEl.value = commandHistory[historyIndex];
            }
        } else if (e.key === 'ArrowDown') {
            e.preventDefault();
            if (historyIndex < commandHistory.length - 1) {
                historyIndex++;
                inputEl.value = commandHistory[historyIndex];
            } else {
                historyIndex = commandHistory.length;
                inputEl.value = '';
            }
        }
    });

    document.addEventListener('click', function(e) {
        if (!e.target.closest('.manual-panel') && !matrixGameActive) {
            inputEl.focus();
        }
    });

    // ===========================================
    // INITIALIZATION
    // ===========================================
    function init() {
        printAscii('   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—');
        printAscii('  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•');
        printAscii('  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ–ˆâ–ˆâ•”â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• ');
        printAscii('  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘    â•šâ–ˆâ–ˆâ•”â•  ');
        printAscii('  â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘ â•šâ•â• â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   ');
        printAscii('  â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•     â•šâ•â•â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•â•šâ•â•   ');
        print('', '');
        print(t('[ç³»ç»Ÿ] è¿œç¨‹è¿æ¥å·²å»ºç«‹', '[SYSTEM] Remote connection established'), 'system');
        print(t('[ç³»ç»Ÿ] æ•°æ®ä¸­å¿ƒå­˜æ¡£æ¨¡å¼ - 2019å¹´åœæ­¢ç»´æŠ¤', '[SYSTEM] Data Center Archive Mode - Decommissioned 2019'), 'system');
        print('', '');

        setTimeout(() => {
            print(t("æç¤º: è¾“å…¥ 'open readme.txt' é˜…è¯»ç³»ç»ŸæŒ‡å¼•",
                "Tip: Type 'open readme.txt' to read system guide"), 'info');
            print('', '');

            const folder = getCurrentFolder();
            const listDiv = document.createElement('div');
            listDiv.className = 'dir-listing';

            folder.children.forEach(child => {
                const childPath = '/' + child;
                const childNode = getNode(childPath);
                const item = document.createElement('div');
                item.className = 'dir-item';

                if (childNode.type === 'folder') {
                    if (childNode.encrypted) {
                        item.classList.add('encrypted');
                    } else {
                        item.classList.add('folder');
                    }
                } else {
                    item.classList.add('file');
                }
                item.textContent = child + (childNode.type === 'folder' ? '/' : '');
                listDiv.appendChild(item);
            });

            outputEl.appendChild(listDiv);
            outputEl.scrollTop = outputEl.scrollHeight;
        }, 500);

        updatePrompt();
        inputEl.focus();
    }

    // ===========================================
    // STARTUP LOGIC
    // ===========================================
    window.addEventListener('message', (event) => {
        const data = event.data;
        if (data && data.type === 'init') {
            console.log('[Terminal] Received init message:', data);

            if (data.lang) {
                setLanguage(data.lang);
            }

            init();
        }
    });

    if (window.self === window.top) {
        console.log('[Terminal] Running standalone');
        init();
    }
</script>
</body>
</html>