<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ANOMALY: TERMINAL_ACCESS</title>
    <link rel="stylesheet" href="terminal-minigame.css">
</head>
<body class="lang-cn">

<!-- CRT æ•ˆæœå±‚ -->
<div class="crt-overlay"></div>
<div class="vignette"></div>

<!-- è¯­è¨€åˆ‡æ¢ -->
<div class="lang-switch" onclick="TerminalGame.toggleLanguage()">
    [ <span id="btn-cn" class="active">CN</span> / <span id="btn-en">EN</span> ]
</div>

<!--<button id="dev-skip-btn" onclick="TerminalGame.debugWin()">-->
<!--    [DEV] SKIP LEVEL-->
<!--</button>-->

<!-- ä¸»å®¹å™¨ -->
<div class="game-container">
    <!-- ç»ˆç«¯é¢æ¿ (70%) -->
    <div class="terminal-panel">
        <div class="terminal-header">
            <div class="terminal-dots">
                <span class="terminal-dot red"></span>
                <span class="terminal-dot yellow"></span>
                <span class="terminal-dot green"></span>
            </div>
            <span class="terminal-title">
                <span class="lang-cn-only">è¿œç¨‹ç»ˆç«¯ - å·²è¿æ¥</span>
                <span class="lang-en-only">REMOTE TERMINAL - CONNECTED</span>
            </span>
        </div>
        <div class="terminal-body">
            <div class="terminal-output" id="terminal-output"></div>
            <div class="terminal-input-area">
                <span class="prompt" id="prompt">guest@server:/$</span>
                <input type="text" id="terminal-input" autocomplete="off" autofocus>
            </div>
        </div>
    </div>

    <!-- æ“ä½œæ‰‹å†Œé¢æ¿ (30%) -->
    <div class="manual-panel">
        <div class="manual-header">
            <h2>
                <span class="lang-cn-only">æ“ä½œæ‰‹å†Œ</span>
                <span class="lang-en-only">OPERATOR MANUAL</span>
            </h2>
        </div>
        <div class="manual-content">
            <!-- èµ·å§‹æç¤º -->
            <div class="start-hint">
                <div class="start-hint-title">
                    <span class="lang-cn-only">âš ï¸ ä»è¿™é‡Œå¼€å§‹</span>
                    <span class="lang-en-only">âš ï¸ START HERE</span>
                </div>
                <p style="color: #88aa88; font-size: 11px;">
                    <span class="lang-cn-only">é˜…è¯»ç³»ç»ŸæŒ‡å¼•è·å–æ£€ç´¢æµç¨‹</span>
                    <span class="lang-en-only">Read system guide for retrieval process</span>
                </p>
                <div class="start-hint-cmd">open readme.txt</div>
            </div>

            <!-- ä»»åŠ¡ç›®æ ‡ -->
            <div class="manual-section">
                <h3>
                    <span class="lang-cn-only">â–¸ ä»»åŠ¡ç›®æ ‡</span>
                    <span class="lang-en-only">â–¸ OBJECTIVE</span>
                </h3>
                <div class="objective-box">
                    <span class="lang-cn-only">å®šä½å¹¶ä¸‹è½½æœºå¯†æ–‡ä»¶:</span>
                    <span class="lang-en-only">Locate and download:</span>
                    <div class="target-file">SHADOW_LEDGER_FINAL.dat</div>
                </div>
            </div>

            <!-- å¯ç”¨æŒ‡ä»¤ -->
            <div class="manual-section">
                <h3>
                    <span class="lang-cn-only">â–¸ å¯ç”¨æŒ‡ä»¤</span>
                    <span class="lang-en-only">â–¸ COMMANDS</span>
                </h3>
                <ul class="cmd-list">
                    <li>
                        <span class="cmd-name">where</span><br>
                        <span class="cmd-desc lang-cn-only">æ˜¾ç¤ºå½“å‰æ‰€åœ¨ä½ç½®</span>
                        <span class="cmd-desc lang-en-only">Show current location</span>
                    </li>
                    <li>
                        <span class="cmd-name">look</span><br>
                        <span class="cmd-desc lang-cn-only">æŸ¥çœ‹å½“å‰ç›®å½•å†…å®¹</span>
                        <span class="cmd-desc lang-en-only">See what's here</span>
                    </li>
                    <li>
                        <span class="cmd-name">open &lt;name&gt;</span><br>
                        <span class="cmd-desc lang-cn-only">æ‰“å¼€æ–‡ä»¶å¤¹æˆ–é¢„è§ˆæ–‡ä»¶</span>
                        <span class="cmd-desc lang-en-only">Open folder or preview file</span>
                    </li>
                    <li>
                        <span class="cmd-name">back</span><br>
                        <span class="cmd-desc lang-cn-only">è¿”å›ä¸Šçº§ç›®å½•</span>
                        <span class="cmd-desc lang-en-only">Return to parent directory</span>
                    </li>
                    <li>
                        <span class="cmd-name">download &lt;file&gt;</span><br>
                        <span class="cmd-desc lang-cn-only">ä¸‹è½½æŒ‡å®šæ–‡ä»¶</span>
                        <span class="cmd-desc lang-en-only">Download specified file</span>
                    </li>
                    <li>
                        <span class="cmd-name">decrypt &lt;name&gt;</span><br>
                        <span class="cmd-desc lang-cn-only">è§£å¯†åŠ å¯†çš„ç›®å½•æˆ–æ–‡ä»¶</span>
                        <span class="cmd-desc lang-en-only">Decrypt encrypted folder/file</span>
                    </li>
                    <li>
                        <span class="cmd-name">clear</span><br>
                        <span class="cmd-desc lang-cn-only">æ¸…ç©ºç»ˆç«¯å±å¹•</span>
                        <span class="cmd-desc lang-en-only">Clear terminal screen</span>
                    </li>
                    <li>
                        <span class="cmd-name">crack &lt;file&gt;</span><br>
                        <span class="cmd-desc lang-cn-only">æš´åŠ›ç ´è§£å“ˆå¸Œæ–‡ä»¶</span>
                        <span class="cmd-desc lang-en-only">Brute-force hash file</span>
                    </li>
                    <li>
                        <span class="cmd-name">su &lt;user&gt;</span><br>
                        <span class="cmd-desc lang-cn-only">åˆ‡æ¢ç”¨æˆ·èº«ä»½</span>
                        <span class="cmd-desc lang-en-only">Switch user identity</span>
                    </li>
                    <li>
                        <span class="cmd-name">passwd &lt;user&gt;</span><br>
                        <span class="cmd-desc lang-cn-only">ä¿®æ”¹è´¦æˆ·å¯†ç  (Root)</span>
                        <span class="cmd-desc lang-en-only">Change password (Root)</span>
                    </li>
                    <li>
                        <span class="cmd-name">help</span><br>
                        <span class="cmd-desc lang-cn-only">æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</span>
                        <span class="cmd-desc lang-en-only">Show help information</span>
                    </li>
                </ul>
            </div>

            <!-- æç¤º -->
            <div class="manual-section">
                <h3>
                    <span class="lang-cn-only">â–¸ æç¤º</span>
                    <span class="lang-en-only">â–¸ TIPS</span>
                </h3>
                <p style="color: #88aa88; font-size: 11px; line-height: 1.6;">
                    <span class="lang-cn-only">â€¢ æŒ‰ TAB é”®å¯è‡ªåŠ¨è¡¥å…¨<br>â€¢ ğŸ”’ è¡¨ç¤ºéœ€è¦è§£å¯†<br>â€¢ ğŸ” è¡¨ç¤ºé«˜å¼ºåº¦åŠ å¯†</span>
                    <span class="lang-en-only">â€¢ Press TAB to auto-complete<br>â€¢ ğŸ”’ requires decryption<br>â€¢ ğŸ” high-level encryption</span>
                </p>
            </div>
        </div>
    </div>
</div>

<!-- æˆåŠŸé®ç½© -->
<div class="success-overlay" id="success-overlay">
    <div class="success-title">
        <span class="lang-cn-only">ä»»åŠ¡å®Œæˆ</span>
        <span class="lang-en-only">MISSION COMPLETE</span>
    </div>
    <div class="success-subtitle">
        <span class="lang-cn-only">[ æ•°æ®å·²å®‰å…¨è·å– ]</span>
        <span class="lang-en-only">[ DATA SECURED ]</span>
    </div>
</div>

<script src="../tools/decrypt-lib.js"></script>
<script src="../tools/lang-switch.js"></script>
<script src="../tools/config-loader.js"></script>

<script src="terminal-minigame.js"></script>

-->
<script>
    // å®šä¹‰é…ç½®åŠ è½½å‡½æ•°
    window.reloadConfig = async function(lang) {
        try {
            await UnifiedLoader.load(
                'terminal-minigame-config',
                'TerminalMiniGameConfig',
                'ENCRYPTED_TERMINAL_CONFIG',
                lang
            );
            console.log('[Terminal] Config loaded successfully');
        } catch (e) {
            console.error('[Terminal] Config load failed:', e);
            // å¤±è´¥æ—¶ TerminalGame å†…éƒ¨ä¼šä½¿ç”¨é»˜è®¤é…ç½®
        }
    };

    // åˆå§‹åŒ–æµç¨‹
    (async function() {
        const currentLang = localStorage.getItem('app_lang') || 'cn';

        // 1. ç­‰å¾…é…ç½®åŠ è½½
        await window.reloadConfig(currentLang);

        // 2. åªæœ‰åœ¨é…ç½®åŠ è½½å®Œæˆåï¼Œæ‰å¯åŠ¨æ¸¸æˆå¼•æ“
        // è¿™é‡Œé»˜è®¤å¯åŠ¨ 'default' å…³å¡ï¼Œæˆ–è€…ä½ å¯ä»¥ä» URL å‚æ•°è¯»å– levelId
        const urlParams = new URLSearchParams(window.location.search);
        const startLevel = urlParams.get('level') || 'default';

        if (typeof TerminalGame !== 'undefined') {
            TerminalGame.init({
                levelId: startLevel,
                lang: currentLang
            });
        }
    })();
</script>


</body>
</html>
