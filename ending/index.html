<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»ç»Ÿé€šçŸ¥</title>
    <style>
        /* ==================== æ ¸å¿ƒè§†è§‰å®šä¹‰ ==================== */
        :root {
            --danger-color: #ff003c;
            --mail-color: #0d9488; /* å¯¹åº”é‚®ä»¶ç³»ç»Ÿçš„é’è‰² */
            --bg-color: #050505;
            --font-display: "Impact", "Arial Black", sans-serif;
            --font-ui: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            background-color: var(--bg-color);
            overflow: hidden;
            font-family: var(--font-ui);
            user-select: none;
        }

        /* èƒŒæ™¯å±‚ï¼šæ‰‹ç”µç­’å›¾ç‰‡ */
        #bg-layer {
            position: absolute; inset: 0;
            background-image: url('bg.jpg');
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
            z-index: 1;
            transition: filter 0.5s, opacity 2s ease-in;
            opacity: 1;
        }

        /* å±å¹•ç‰¹æ•ˆï¼šä¿ç•™ä¸€ç‚¹ç‚¹æš—è§’å¢åŠ ç”µå½±æ„Ÿ */
        .vignette {
            position: absolute; inset: 0; z-index: 2; pointer-events: none;
            background: radial-gradient(circle, transparent 50%, #000 150%);
        }

        /* ==================== é˜¶æ®µä¸€ï¼šææƒ§ (RED) ==================== */
        #panic-ui {
            position: absolute; inset: 0; z-index: 10;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            mix-blend-mode: hard-light;
            transition: opacity 0.5s;
        }

        .panic-title {
            font-family: var(--font-display);
            font-size: 8rem;
            color: var(--danger-color);
            text-transform: uppercase;
            letter-spacing: 10px;
            text-shadow: 4px 4px 0px #000, 0 0 30px rgba(255, 0, 60, 0.8);
            animation: shake 0.5s infinite;
        }

        .panic-sub {
            font-size: 2rem; color: #fff; background: var(--danger-color);
            padding: 10px 30px; font-weight: bold; letter-spacing: 5px;
            margin-top: 20px;
            box-shadow: 0 0 20px rgba(255, 0, 60, 0.5);
        }

        /* ==================== é˜¶æ®µäºŒï¼šæ½œä¼ (æ—¥æœŸè·³åŠ¨) ==================== */
        #time-lapse-ui {
            position: absolute; inset: 0; z-index: 20;
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none;
            transition: opacity 1s;
        }

        .date-counter {
            font-size: 5rem; font-weight: 300;
            color: #888; letter-spacing: 5px;
            font-family: var(--font-display);
        }

        /* ==================== é˜¶æ®µä¸‰ï¼šé‚®ä»¶é€šçŸ¥ (Notification) ==================== */
        #notification-ui {
            position: absolute; inset: 0; z-index: 30;
            display: flex; justify-content: center; align-items: center;
            background: rgba(0,0,0,0.85); /* æ·±è‰²èƒŒæ™¯è¡¬æ‰˜ç™½è‰²å¡ç‰‡ */
            opacity: 0; pointer-events: none;
            transition: opacity 1.5s ease;
        }

        /* æ¨¡ä»¿é‚®ä»¶ç³»ç»Ÿçš„é€šçŸ¥å¡ç‰‡ */
        .mail-card {
            background: #fff;
            width: 400px;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            text-align: center;
            transform: translateY(20px);
            animation: slideUpCard 0.8s ease forwards;
        }

        .card-header {
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
            margin-bottom: 20px;
            color: #64748b;
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .card-body {
            color: #1e293b;
            margin-bottom: 25px;
        }

        .recipient {
            font-size: 1.1rem; margin-bottom: 15px; color: #334155;
        }

        .new-mail-alert {
            font-size: 1.2rem; font-weight: bold; color: var(--mail-color);
            margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 10px;
        }

        .mail-info {
            background: #f1f5f9; padding: 15px; border-radius: 8px;
            text-align: left; font-size: 0.95rem; line-height: 1.6;
            border-left: 4px solid var(--mail-color);
        }

        .system-hint {
            margin-top: 25px; font-size: 0.85rem; color: #ef4444;
            background: #fef2f2; padding: 10px; border-radius: 6px;
        }

        .btn-login {
            display: block; width: 100%; margin-top: 20px;
            background: var(--mail-color); color: white;
            border: none; padding: 12px; border-radius: 6px;
            font-size: 1rem; font-weight: 600; cursor: pointer;
            text-decoration: none; transition: background 0.2s;
        }
        .btn-login:hover { background: #0f766e; }

        /* ==================== åŠ¨ç”» ==================== */
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }
        @keyframes slideUpCard { to { transform: translateY(0); } }

        /* çŠ¶æ€ç±» */
        body.step-2 #bg-layer { opacity: 0; filter: blur(20px); } /* èƒŒæ™¯é»‘æ‰ */
        body.step-2 #panic-ui { opacity: 0; } /* çº¢è‰²å­—æ¶ˆå¤± */
        body.step-2 #time-lapse-ui { opacity: 1; } /* æ˜¾ç¤ºæ—¥æœŸ */

        body.step-3 #time-lapse-ui { opacity: 0; } /* æ—¥æœŸæ¶ˆå¤± */
        body.step-3 #notification-ui { opacity: 1; pointer-events: auto; } /* æ˜¾ç¤ºå¡ç‰‡ */

    </style>
</head>
<body>

<div class="vignette"></div>
<div id="bg-layer"></div>

<div id="panic-ui">
    <div class="panic-title">å¿«è·‘ï¼ï¼</div>
    <div class="panic-sub">ç«‹åˆ»ç¦»å¼€å®¿èˆï¼ï¼</div>
</div>

<div id="time-lapse-ui">
    <div id="date-display" class="date-counter">2025.11.17</div>
</div>

<div id="notification-ui">
    <div class="mail-card">
        <div class="card-header">å¼‚è±¡ä¸­å­¦é‚®ä»¶ä¸­å¿ƒ Â· é€šçŸ¥</div>

        <div class="card-body">
            <div class="recipient">è‡´ï¼šå´å®‡ (2023012064)</div>
            <div class="new-mail-alert">
                <span>ğŸ“©</span> æ‚¨æœ‰ä¸€å°æ–°çš„æœªè¯»é‚®ä»¶
            </div>

            <div class="mail-info">
                <strong>å‘ä»¶äººï¼š</strong> å¼ æ™¨<br>
                <strong>å‘é€æ—¶é—´ï¼š</strong> 2025-11-28 23:42<br>
                <strong>ä¸»é¢˜ï¼š</strong> â€œåªæœ‰ä½ èƒ½å¸®æˆ‘äº†â€
            </div>

            <div class="system-hint">
                âš  ç³»ç»Ÿæç¤ºï¼šè¯·åœ¨ç»ˆç«¯é‡æ–°ç™»å½•å´å®‡çš„é‚®ç®±è´¦æˆ·è¿›è¡ŒæŸ¥é˜…
            </div>
        </div>

        <button class="btn-login" onclick="window.location.href='../terminal/index.html'">
            è¿”å›ç»Ÿä¸€ç»ˆç«¯é¦–é¡µ
        </button>
    </div>
</div>

<script>
    const START_DATE = new Date("2025-11-17").getTime();
    const END_DATE = new Date("2025-11-28").getTime();

    window.onload = function() {
        // 3ç§’åè¿›å…¥ Phase 2 (é»‘å±+æ—¥æœŸ)
        setTimeout(() => {
            document.body.classList.add('step-2');
            setTimeout(runTimeLapse, 1000); // é»‘å±1ç§’åå¼€å§‹æ»šæ—¥æœŸ
        }, 3000);
    };

    function runTimeLapse() {
        let dateDisplay = document.getElementById('date-display');
        let current = START_DATE;
        // æ§åˆ¶æ»šåŠ¨é€Ÿåº¦ï¼š30å¸§æ»šå®Œï¼Œæ¯å¸§50ms = 1.5ç§’
        let step = (END_DATE - START_DATE) / 30;

        let timer = setInterval(() => {
            current += step;
            if (current >= END_DATE) {
                current = END_DATE;
                clearInterval(timer);
                // æ»šåŠ¨ç»“æŸï¼Œè¿›å…¥ Phase 3
                setTimeout(() => {
                    showFinalTarget();
                    document.body.classList.add('step-3');
                }, 500);
            }

            let d = new Date(current);
            // æ ¼å¼ï¼š2025.11.17
            let dateStr = d.getFullYear() + '.' +
                String(d.getMonth() + 1).padStart(2, '0') + '.' +
                String(d.getDate()).padStart(2, '0');
            dateDisplay.innerText = dateStr;
        }, 50);
    }

    function showFinalTarget() {
        // å†™å…¥å‰§æƒ…æ ‡è®°
        localStorage.setItem('PLOT_ZC_ESCAPED', 'true');
    }
</script>
</body>
</html>